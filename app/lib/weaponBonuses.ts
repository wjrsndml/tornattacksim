import type { WeaponBonus, WeaponCategory } from "./fightSimulatorTypes";

// 武器特效数据
export const WEAPON_BONUSES: { [key: string]: WeaponBonus } = {
	Achilles: {
		name: "Achilles",
		type: "Buff",
		description: "Increased Foot damage (%)",
		minValue: 50,
		maxValue: 149,
		applicableWeapons: ["PI", "PS", "RF", "SG", "SM"],
		unit: "%",
	},
	Assassinate: {
		name: "Assassinate",
		type: "Buff",
		description: "Increased damage (%) on the first turn",
		minValue: 50,
		maxValue: 148,
		applicableWeapons: ["PI", "PS", "RF"],
		unit: "%",
	},
	Backstab: {
		name: "Backstab",
		type: "Buff",
		description: "Chance (%) of double damage when opponent is distracted",
		minValue: 30,
		maxValue: 96,
		applicableWeapons: ["PI"],
		unit: "%",
	},
	Berserk: {
		name: "Berserk",
		type: "Buff / De-Buff",
		description: "Increased Damage (%), Reduced Hit Chance (half%)",
		minValue: 20,
		maxValue: 87,
		applicableWeapons: ["SL"],
		unit: "%",
	},
	Bleed: {
		name: "Bleed",
		type: "DOT",
		description:
			'Chance at "Bleed" DOT effect, with damage ticks starting at 45% that of the damage dealt when proc occurs, and reducing to zero over 9 turns',
		minValue: 20,
		maxValue: 67,
		applicableWeapons: ["PI", "SG", "SL"],
		unit: "%",
	},
	Blindside: {
		name: "Blindside",
		type: "Buff",
		description: "Increased damage (%) if target has full life",
		minValue: 25,
		maxValue: 96,
		applicableWeapons: ["SG"],
		unit: "%",
	},
	Bloodlust: {
		name: "Bloodlust",
		type: "Buff",
		description: "Life regenerated by a (%) of damage dealt",
		minValue: 10,
		maxValue: 17,
		applicableWeapons: ["SL"],
		unit: "%",
	},
	Comeback: {
		name: "Comeback",
		type: "Buff",
		description: "Increased damage (%) while under 1/4 life",
		minValue: 50,
		maxValue: 127,
		applicableWeapons: ["SM"],
		unit: "%",
	},
	Conserve: {
		name: "Conserve",
		type: "Buff",
		description: "Increase (%) ammo conservation",
		minValue: 25,
		maxValue: 49,
		applicableWeapons: ["MG", "RF", "SM"],
		unit: "%",
	},
	Cripple: {
		name: "Cripple",
		type: "Enemy Debuff",
		description:
			"Chance (%) to Cripple opponent reducing Dexterity by 25% (x3)",
		minValue: 20,
		maxValue: 58,
		applicableWeapons: ["HA", "SG"],
		unit: "%",
	},
	Crusher: {
		name: "Crusher",
		type: "Buff",
		description: "Increased Head damage (%)",
		minValue: 50,
		maxValue: 133,
		applicableWeapons: ["CL"],
		unit: "%",
	},
	Cupid: {
		name: "Cupid",
		type: "Buff",
		description: "Increased Heart damage (%)",
		minValue: 50,
		maxValue: 157,
		applicableWeapons: ["PI", "PS", "RF", "SG", "SM"],
		unit: "%",
	},
	Deadeye: {
		name: "Deadeye",
		type: "Buff",
		description: "Increased Critical hit damage (%)",
		minValue: 25,
		maxValue: 123,
		applicableWeapons: ["PI", "PS", "RF", "MG"],
		unit: "%",
	},
	Deadly: {
		name: "Deadly",
		type: "Buff",
		description: 'Chance of a "Deadly" hit (+500% damage)',
		minValue: 2,
		maxValue: 10,
		applicableWeapons: ["SG"],
		unit: "%",
	},
	Disarm: {
		name: "Disarm",
		type: "Enemy Debuff",
		description:
			"Disables opponents weapon for (X) turns upon hitting their hand or arm",
		minValue: 3,
		maxValue: 15,
		applicableWeapons: ["CL", "PI", "PS", "RF", "SL"],
		unit: "turns",
	},
	"Double-edged": {
		name: "Double-edged",
		type: "Buff",
		description: "Chance (%) of double damage at the cost of self injury",
		minValue: 10,
		maxValue: 32,
		applicableWeapons: ["SL"],
		unit: "%",
	},
	"Double Tap": {
		name: "Double Tap",
		type: "Buff",
		description: "Chance at hitting twice in a single turn",
		minValue: 15,
		maxValue: 54,
		applicableWeapons: ["PS"],
		unit: "%",
	},
	Empower: {
		name: "Empower",
		type: "Buff",
		description: "Increased Strength while using the weapon (%)",
		minValue: 50,
		maxValue: 206,
		applicableWeapons: ["PI", "CL", "SL"],
		unit: "%",
	},
	Eviscerate: {
		name: "Eviscerate",
		type: "Enemy Debuff",
		description: "Opponent receives extra damage (%) under this effect",
		minValue: 15,
		maxValue: 34,
		applicableWeapons: ["PI", "SG", "SL"],
		unit: "%",
	},
	Execute: {
		name: "Execute",
		type: "Buff",
		description:
			"Instant defeat a target upon a damaging hit when opponent is below (%) life",
		minValue: 15,
		maxValue: 29,
		applicableWeapons: ["PS"],
		unit: "%",
	},
	Expose: {
		name: "Expose",
		type: "Buff",
		description: "Increased critical hit rate (%)",
		minValue: 7,
		maxValue: 21,
		applicableWeapons: ["PS", "RF", "SG", "SL"],
		unit: "%",
	},
	Finale: {
		name: "Finale",
		type: "Buff",
		description: "Increased damage (%) for every turn the weapon is not used",
		minValue: 10,
		maxValue: 17,
		applicableWeapons: ["HA"],
		unit: "%",
	},
	Focus: {
		name: "Focus",
		type: "Buff",
		description: "Hit Chance increase (%) for every successive miss",
		minValue: 15,
		maxValue: 32,
		applicableWeapons: ["RF"],
		unit: "%",
	},
	Frenzy: {
		name: "Frenzy",
		type: "Buff",
		description: "(%) Increase to Damage and Accuracy on each successive hit",
		minValue: 5,
		maxValue: 14,
		applicableWeapons: ["CL", "PI", "SL"],
		unit: "%",
	},
	Fury: {
		name: "Fury",
		type: "Buff",
		description: "Chance (%) of hitting twice in a single turn",
		minValue: 10,
		maxValue: 34,
		applicableWeapons: ["CL", "PI", "SL"],
		unit: "%",
	},
	Grace: {
		name: "Grace",
		type: "Buff / De-Buff",
		description: "Increased Hit Chance (%), Reduced Damage (half%)",
		minValue: 20,
		maxValue: 66,
		applicableWeapons: ["SL"],
		unit: "%",
	},
	"Home Run": {
		name: "Home Run",
		type: "Buff",
		description: "Chance (%) to deflect incoming temporary items",
		minValue: 50,
		maxValue: 93,
		applicableWeapons: ["CL"],
		unit: "%",
	},
	Irradiate: {
		name: "Irradiate",
		type: "Enemy Debuff",
		description:
			"Apply 1-3 hours radiation poisoning when used for the finishing hit",
		minValue: 100,
		maxValue: 100,
		applicableWeapons: ["PI"],
		unit: "%",
	},
	Motivation: {
		name: "Motivation",
		type: "Buff",
		description:
			"Chance (%) to increase all stats by 10% (up to 5 of these may stack)",
		minValue: 15,
		maxValue: 35,
		applicableWeapons: ["CL", "PS", "SL", "SM"],
		unit: "%",
	},
	Paralyzed: {
		name: "Paralyzed",
		type: "Enemy Debuff",
		description:
			'Adds 300 seconds "Paralyzed" effect (50% chance of missing turns)',
		minValue: 5,
		maxValue: 18,
		applicableWeapons: ["HA"],
		unit: "%",
	},
	Parry: {
		name: "Parry",
		type: "Enemy Debuff",
		description: "(%) Chance to block incoming melee attacks",
		minValue: 50,
		maxValue: 92,
		applicableWeapons: ["SL"],
		unit: "%",
	},
	Penetrate: {
		name: "Penetrate",
		type: "Enemy Debuff",
		description: "Ignores (%) of enemy armor mitigation",
		minValue: 25,
		maxValue: 49,
		applicableWeapons: ["MG", "PI", "RF"],
		unit: "%",
	},
	Plunder: {
		name: "Plunder",
		type: "Buff",
		description: "Increase (%) to money mugged when used for finishing hit",
		minValue: 20,
		maxValue: 49,
		applicableWeapons: ["CL", "PI", "SL"],
		unit: "%",
	},
	Powerful: {
		name: "Powerful",
		type: "Buff",
		description: "Increased Damage (%)",
		minValue: 15,
		maxValue: 49,
		applicableWeapons: ["CL", "HA", "RF", "SM", "SG"],
		unit: "%",
	},
	Proficience: {
		name: "Proficience",
		type: "Buff",
		description: "Increase XP (%) gained when used for the finishing hit",
		minValue: 20,
		maxValue: 59,
		applicableWeapons: ["SM"],
		unit: "%",
	},
	Puncture: {
		name: "Puncture",
		type: "Buff",
		description: "Chance (%) of ignoring armor",
		minValue: 20,
		maxValue: 57,
		applicableWeapons: ["MG", "PI", "RF"],
		unit: "%",
	},
	Quicken: {
		name: "Quicken",
		type: "Buff",
		description: "Increased Speed while using the weapon (%)",
		minValue: 50,
		maxValue: 219,
		applicableWeapons: ["PS", "SL", "SM"],
		unit: "%",
	},
	Rage: {
		name: "Rage",
		type: "Buff",
		description: "Chance (%) at hitting 2-8 times in a single turn",
		minValue: 4,
		maxValue: 18,
		applicableWeapons: ["CL", "PI", "SL"],
		unit: "%",
	},
	Revitalize: {
		name: "Revitalize",
		type: "Buff",
		description:
			"Chance (%) of restoring the energy spent attacking, when used for the finishing hit",
		minValue: 10,
		maxValue: 24,
		applicableWeapons: ["SM"],
		unit: "%",
	},
	Roshambo: {
		name: "Roshambo",
		type: "Buff",
		description: "Increased Groin damage (%)",
		minValue: 50,
		maxValue: 132,
		applicableWeapons: ["CL"],
		unit: "%",
	},
	Slow: {
		name: "Slow",
		type: "Enemy Debuff",
		description: "Chance (%) to Slow opponent reducing Speed by 25% (x3)",
		minValue: 20,
		maxValue: 64,
		applicableWeapons: ["CL", "PI", "SM"],
		unit: "%",
	},
	Smurf: {
		name: "Smurf",
		type: "Buff",
		description: "(%) damage increase for each level under an opponent",
		minValue: 1,
		maxValue: 4,
		applicableWeapons: ["MG"],
		unit: "%",
	},
	Specialist: {
		name: "Specialist",
		type: "Buff",
		description: "Increased Damage (%), weapon is limited to a single clip",
		minValue: 20,
		maxValue: 59,
		applicableWeapons: ["MG", "PS", "RF", "SM", "SG", "HA"],
		unit: "%",
	},
	Stricken: {
		name: "Stricken",
		type: "Buff",
		description: "(%) Increased hospital time upon final hit",
		minValue: 30,
		maxValue: 96,
		applicableWeapons: ["HA"],
		unit: "%",
	},
	Stun: {
		name: "Stun",
		type: "Enemy Debuff",
		description: "Chance (%) to cause opponent to miss next turn",
		minValue: 10,
		maxValue: 40,
		applicableWeapons: ["CL", "HA", "SG"],
		unit: "%",
	},
	Suppress: {
		name: "Suppress",
		type: "Enemy Debuff",
		description:
			"(%) chance to Suppress opponent causing 25% chance to miss future turns",
		minValue: 25,
		maxValue: 49,
		applicableWeapons: ["MG"],
		unit: "%",
	},
	"Sure Shot": {
		name: "Sure Shot",
		type: "Buff",
		description: "Chance (%) at a guaranteed hit",
		minValue: 3,
		maxValue: 11,
		applicableWeapons: ["RF"],
		unit: "%",
	},
	Throttle: {
		name: "Throttle",
		type: "Buff",
		description: "Increased Throat damage (%)",
		minValue: 50,
		maxValue: 170,
		applicableWeapons: ["PS", "RF", "SG", "SL", "SM"],
		unit: "%",
	},
	Warlord: {
		name: "Warlord",
		type: "Buff",
		description: "Increases respect gained (%)",
		minValue: 15,
		maxValue: 38,
		applicableWeapons: ["HA", "RF", "SG", "SM", "MG"],
		unit: "%",
	},
	Weaken: {
		name: "Weaken",
		type: "Enemy Debuff",
		description: "Chance (%) to Weaken opponent reducing Defense by 25% (x3)",
		minValue: 20,
		maxValue: 63,
		applicableWeapons: ["PI", "RF", "SG", "SL"],
		unit: "%",
	},
	"Wind-up": {
		name: "Wind-up",
		type: "Buff",
		description:
			"Increased damage (%) after spending a turn to wind up the weapon",
		minValue: 125,
		maxValue: 221,
		applicableWeapons: ["CL", "PI", "SL"],
		unit: "%",
	},
	Wither: {
		name: "Wither",
		type: "Enemy Debuff",
		description: "Chance (%) to Wither opponent reducing Strength by 25% (x3)",
		minValue: 20,
		maxValue: 63,
		applicableWeapons: ["PI", "PS", "SM"],
		unit: "%",
	},
};

// 根据武器类别获取可用的武器特效
export function getAvailableBonusesForWeapon(
	weaponCategory: string,
): WeaponBonus[] {
	const categoryCode = getWeaponCategoryCode(weaponCategory);
	if (!categoryCode) return [];

	return Object.values(WEAPON_BONUSES).filter((bonus) =>
		bonus.applicableWeapons.includes(categoryCode),
	);
}

// 获取武器类别代码
function getWeaponCategoryCode(weaponCategory: string): WeaponCategory | null {
	const categoryMap: { [key: string]: WeaponCategory } = {
		Clubbing: "CL",
		"Heavy Artillery": "HA",
		"Machine Gun": "MG",
		Mechanical: "MK",
		Piercing: "PI",
		Pistol: "PS",
		Rifle: "RF",
		Shotgun: "SG",
		Slashing: "SL",
		SMG: "SM",
	};

	return categoryMap[weaponCategory] || null;
}

// 获取特效信息
export function getWeaponBonus(bonusName: string): WeaponBonus | null {
	return WEAPON_BONUSES[bonusName] || null;
}
